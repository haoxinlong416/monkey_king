# 扫描指定网段存活主机的脚本

### 一、源代码和注释

```shell
#!/bin/bash  
# 指定脚本使用的解释器为bash  

# 从用户那里读取第一个IP地址的第三段（通常是子网中的起始地址的第三段）  
read v1  
  
# 从用户那里读取第二个IP地址的第三段（通常是子网中的结束地址的第三段）  
read v2  
  
# 使用cut命令从v1中提取第三段数字（点分隔的IP地址中的第三个数字）  
v3=$(echo $v1 | cut -d'.' -f3)  
  
# 使用cut命令从v2中提取第三段数字（点分隔的IP地址中的第三个数字）  
v4=$(echo $v2 | cut -d'.' -f3)  
  
# 使用for循环遍历从v3到v4（不包括v4）的所有整数  
for(( i=$v3; i<$v4; i++));do  
        # 内部for循环遍历1到254的所有整数，用于生成子网内的IP地址的第四段  
        for j in $(seq 1 254);do  
                # 构造完整的IP地址  
                ip="172.17.$i.$j"  
                # 尝试ping该IP地址一次，并将输出重定向到/dev/null（忽略输出）  
                if ping -c 1 "$ip" >/dev/null 2>&1 ; then  
                        # 如果ping成功（即IP地址是活动的），则将该IP地址追加到ping.txt文件中  
                        echo "$ip" >>ping.txt  
                else  
                        # 如果ping失败（即IP地址是死的），则打印消息  
                        echo "$ip is dead"  
                fi  
        done  
done  
  
# 脚本执行完毕，退出状态为0表示成功  
exit 0
```

### 二、运行结果



![微信图片_20240906174215](%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240906174215.png)

![微信图片_20240906174224](%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240906174224.png)

![微信图片_20240906174228](%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240906174228.png)

### 三、数据流图

![微信图片_20240906174237](%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240906174237.jpg)